function [ x1 ] = optiml_portfolio_mean_varian( N,T ) %OPTIML_PORTFOLIO_MEAN_VARIAN Summary of this function goes here %N=10,T=11,P:(T-by-N)
P = [0.0162355710000000,-0.00246812000000000,-0.0404016810000000,- 0.0419082760000000,-0.0737995490000000,-0.0340909090000000,- 0.0419082760000000,1645.88427300000,0.0354098360000000,-0.184210526000000; 
0.0257420960000000,- 0.00515463900000000,0.0194694570000000,0.0707015130000000,- 0.00939457200000000,0.0745098040000000,0.0707015130000000,0.171171171000000 ,0.0232742240000000,-0.0645161290000000; 
0.0265704650000000,0.0130569950000000,0.00381952700000000,- 0.00539568300000000,-0.0386371620000000,-0.0364963500000000,- 0.00539568300000000,0.107692308000000,0.0479653410000000,0.0689655170000000; 
0.0131094440000000,- 0.0180032730000000,0.0623067780000000,0.0211831570000000,0.0372670810000000 ,0.121212121000000,0.0211831570000000,0.00694444400000000,0.022442049000000 0,0.322580645000000; 
- 0.0114467550000000,0.0729166670000000,0.0315648090000000,0.0131545660000000 ,-0.126805213000000,0.0405405410000000,0.0131545660000000,- 0.999508966000000,-0.0127075810000000,0.121951220000000; 
0.0142033320000000,0.106796117000000,-0.0108506940000000,- 0.00549313400000000,-0.0338846310000000,0.0324675320000000,- 0.00549313400000000,1515.85393300000,0.0783969580000000,-0.0652173910000000; -0.00970231200000000,-0.0417543860000000,-0.0217200530000000,- 0.0271152400000000,0.0237995820000000,-0.0283018870000000,- 0.0271152400000000,-0.999390741000000,0.0187169400000000,- 0.0465116280000000; 
-0.0126682260000000,0.0252654710000000,-0.0461986990000000,- 0.0237419350000000,0.154159869000000,0.0226537220000000,-0.0237419350000000,-0.0516717330000000,0.0171748100000000,- 0.0731707320000000; 
- 0.00121538500000000,0.0446428570000000,0.00681871600000000,0.00211472400000 000,-0.0155477030000000,0.107594937000000,0.00211472400000000,- 0.0160256410000000,-0.0210732980000000,-0.0263157890000000; 
-0.00787110500000000,0.0769230770000000,-0.0366651100000000,- 0.0308625690000000,-0.113424264000000,-0.00571428600000000,- 0.0308625690000000,-0.0358306190000000,-0.0299505280000000,- 0.0540540540000000; 
0.00523210700000000,0.178571429000000,0.0729696970000000,0.0204137180000000 ,0.0700404860000000,0.0890804600000000,0.0204137180000000,488.864864900000, 0.00110268800000000,0;];
P=P'; %%P: (N-by-T) 
r=P';
mean_return=mean_returnOfobservation(N); %asset I %alternatively, use command mean(r), get the same result... 
%%desired return;; % risk_free fixed saving account interest rate %%choose fixed saving rate 2.03% for one year, we need weekly rate;; rfm=0.0203; % interest rate for one year
rfm=(rfm+1)^(7/365)-1 ; % weekly risk_free interst rate chosen 
%%%
stdDev_return=std(r,1,1); %%% set flag=1 (the second input parameter) correlation=corrcoef(r);
a1=stdDev_return'*stdDev_return;
covariance=correlation.*a1;
nAssets=numel(mean_return); 
Aeq=ones(1,nAssets);
beq=1;
Aineq=-mean_return;
bineq=-rfm;
lb=zeros(nAssets,1);
ub=ones(nAssets,1);
c=zeros(nAssets,1);
options=optimset('quadprog'); %%%default options for the solver quadprog;; 
options = optimset(options,'Algorithm', 'interior-point-convex');
options = optimset(options,'Display','iter','TolFun',1e-10); %%%additional option setting
tic [x1,fval1]=quadprog(covariance,c,Aineq,bineq,Aeq,beq,lb,ub,[],options); toc
end